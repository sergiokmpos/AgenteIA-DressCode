(()=>{"use strict";var e={9973:(e,t,n)=>{var r=n(3751),i=n(641);const a={id:"app"};function o(e,t,n,r,o,s){const l=(0,i.g2)("PdfViewer"),d=(0,i.g2)("WithStreamlitConnection");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(d,null,{default:(0,i.k6)((({args:e})=>[(0,i.bF)(l,{args:e},null,8,["args"])])),_:1})])}var s=n(33);const l={key:0},d={key:1},c=["src","width","height"],p={key:2},h=["src","width","height"],g={key:3};function u(e,t,n,r,a,o){return(0,i.uX)(),(0,i.CE)("div",{id:"pdfContainer",style:(0,s.Tr)(r.pdfContainerStyle)},["unwrap"===n.args.rendering?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",{id:"pdfViewer",style:(0,s.Tr)(r.pdfViewerStyle)},null,4)])):"legacy_embed"===n.args.rendering?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,c)])):"legacy_iframe"===n.args.rendering?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,h)])):((0,i.uX)(),(0,i.CE)("div",g," Error rendering option. "))],4)}n(4114),n(8111),n(2489),n(7588);var v=n(953),w=(n(951),n(9936)),y=n(7445),f=n(2543);const m="pdfjs-dist/cmaps/",b=!0,_=!0,E=["solid","dashed","dotted","double","groove","ridge","inset","outset","none",void 0,null],x={props:["args"],setup(e){const t=(0,v.KR)(0),n=(0,v.KR)(0),r=(0,v.KR)([]),a=(0,v.KR)([]),o=(0,v.KR)([]),s=(0,v.KR)(e.args.height||0),l=(e.args.pages_to_render.length,!0===e.args.render_text),d=(e,t=window.innerWidth)=>{if("string"===typeof e&&e.endsWith("%")){const t=parseFloat(e);if(!isNaN(t))return{type:"percent",value:t/100}}const n=Number(e);return!isNaN(n)&&n>0?{type:"pixel",value:n}:{type:"pixel",value:t}},c=(0,i.EW)((()=>{const t=d(e.args.width,window.innerWidth),n="percent"===t.type?100*t.value+"%":`${t.value}px`;return{width:n,height:e.args.height?`${e.args.height}px`:"auto",overflow:"auto",position:"relative"}})),p={position:"relative"},h=e=>{e&&(e.innerHTML="")},g=(e,t,n,r,i=1)=>{const a=e.getViewport({scale:t,rotation:n}),o=(window.devicePixelRatio||1)*i,s=document.createElement("canvas");return s.id=`canvas_page_${r}`,s.height=a.height*o,s.width=a.width*o,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`,s.style.display="block",s.getContext("2d").scale(o,o),s},u=(t,n,r,i)=>{const a=document.createElement("div");t.id=`${t.id||n}`,a.id=`annotation-${t.id}`,a.setAttribute("data-index",t.id),a.style.position="absolute",a.style.left=t.x*i+"px",a.style.top=t.y*i+"px",a.style.width=t.width*i+"px",a.style.height=t.height*i+"px";let o=t.border;t.border&&E.includes(t.border)||(o="solid"),a.style.outline=`${e.args.annotation_outline_size*i}px ${o} ${t.color}`,a.style.cursor=l?"text":"pointer",a.style.pointerEvents=l?"none":"auto",a.style.zIndex=10,l||a.addEventListener("click",(()=>{y.wk.setComponentValue({clicked_annotation:{index:t.id,...t}})})),r.appendChild(a)},x=async(t,n,r,i,a)=>{const o={canvasContext:n.getContext("2d"),viewport:r};await t.render(o).promise;const s=document.createElement("div");s.className="page",s.style.position="relative",s.style.width=`${r.width}px`,s.style.height=`${r.height}px`,s.style.marginBottom=`${e.args.pages_vertical_spacing}px`;const d=document.createElement("div");if(d.className="canvasWrapper",d.style.position="absolute",d.style.top="0",d.style.left="0",d.appendChild(n),s.appendChild(d),l){const e=await t.getTextContent(),n=document.createElement("div");n.className="textLayer",n.style.zIndex="11",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.height=`${r.height}px`,n.style.width=`${r.width}px`;const i=new w.D6({textContentSource:e,container:n,viewport:r,textDivs:[]});await i.render(),s.appendChild(n)}i&&i.length>0&&i.forEach(((e,t)=>{const n=a+t;u(e,n,s,r.scale)}));const c=document.getElementById("pdfViewer");c.appendChild(s)},k=t=>0===e.args.pages_to_render.length?Array.from({length:t},((e,t)=>t+1)):e.args.pages_to_render,C=async(i,s,l)=>{t.value=0,r.value=[],a.value=[],o.value=[];const d=e.args.resolution_boost||1;let c=0;for(let p=1;p<=i.numPages;p++){const h=await i.getPage(p),u=h.rotate,v=h.getViewport({scale:1,rotation:u});if(e.args.height>0){const t=v.width/v.height,r=t*e.args.height;(0===n.value||r<n.value)&&(n.value=r)}const w=n.value/v.width;if(r.value.push(w),a.value.push(v.height),l.includes(p)){const n=g(h,w,u,p,d);s.style.setProperty("--scale-factor",w);const r=h.getViewport({scale:w,rotation:u,intent:"print"}),i=e.args.annotations.filter((e=>Number(e.page)===p));t.value+=n.height/((window.devicePixelRatio||1)*d),await x(h,n,r,i,c),c+=i.length,n.id&&o.value.push(n.id)}}l.length>0&&(t.value-=e.args.pages_vertical_spacing)},$=e=>{console.error(e),window.alert(e.message)},R=async e=>{w.EA.workerSrc="pdfjs-dist/build/pdf.worker.mjs";try{const t=(0,w.YE)({url:e,cMapUrl:m,cMapPacked:b,enableXfa:_}),n=await t.promise,r=document.getElementById("pdfViewer");h(r);const i=k(n.numPages);await C(n,r,i),V()}catch(t){$(t)}},V=()=>{if(e.args.scroll_to_page){const t=document.getElementById(`canvas_page_${e.args.scroll_to_page}`);t&&t.scrollIntoView({behavior:"smooth"})}else if(e.args.scroll_to_annotation){const t=document.querySelector(`[id^="annotation-"][data-index="${e.args.scroll_to_annotation}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},N=()=>{const n=e.args.height||t.value;n!==s.value&&(y.wk.setFrameHeight(n),s.value=n)},L=()=>{const t=d(e.args.width,window.innerWidth);let r;r="percent"===t.type?Math.min(Math.floor(t.value*window.innerWidth),window.innerWidth):Math.min(t.value,window.innerWidth),r!==n.value&&(n.value=r)},W=async()=>{try{if(console.log("handleResize"),"unwrap"===e.args.rendering){const t=`data:application/pdf;base64,${e.args.binary}`;L(),await R(t),N()}}catch(t){console.error(t)}},O=(0,f.debounce)(W,200);return(0,i.sV)((()=>{O(),window.addEventListener("resize",O)})),(0,i.hi)((()=>{window.removeEventListener("resize",O)})),{pdfContainerStyle:c,pdfViewerStyle:p}}};var k=n(6262);const C=(0,k.A)(x,[["render",u]]),$=C,R={key:0},V={class:"err__msg"};function N(e,t,n,r,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[""!=e.componentError?((0,i.uX)(),(0,i.CE)("div",R,[t[0]||(t[0]=(0,i.Lk)("h1",{class:"err__title"},"Component Error",-1)),(0,i.Lk)("div",V,"Message: "+(0,s.v_)(e.componentError),1)])):null!=e.renderData?(0,i.RG)(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled},void 0,!0):(0,i.Q3)("",!0)])}const L=(0,i.pM)({name:"WithStreamlitConnection",setup(){const e=(0,v.KR)(void 0),t=(0,v.KR)(""),n=n=>{const r=n;e.value=r.detail,t.value=""};return(0,i.sV)((()=>{y.wk.events.addEventListener(y.wk.RENDER_EVENT,n),y.wk.setComponentReady()})),(0,i.$u)((()=>{""!=t.value&&y.wk.setFrameHeight()})),(0,i.hi)((()=>{y.wk.events.removeEventListener(y.wk.RENDER_EVENT,n)})),(0,i.qG)((e=>{t.value=String(e)})),{renderData:e,componentError:t}}}),W=(0,k.A)(L,[["render",N],["__scopeId","data-v-bef81972"]]),O=W,P=(0,i.pM)({name:"App",components:{PdfViewer:$,WithStreamlitConnection:O}}),S=(0,k.A)(P,[["render",o]]),j=S;(0,r.Ef)(j).mount("#app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,(()=>{var e=[];n.O=(t,r,i,a)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,i,a]=e[c],s=!0,l=0;l<r.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,i,a]}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,a,[o,s,l]=r,d=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var c=l(n)}for(t&&t(r);d<o.length;d++)a=o[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkstreamlit_pdf_viewer"]=self["webpackChunkstreamlit_pdf_viewer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(9973)));r=n.O(r)})();
//# sourceMappingURL=app.88fce03e.js.map